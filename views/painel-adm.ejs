<%- include('includes/head.ejs') -%>
<%- include('includes/header.ejs') -%>
<body>
    <h1 style="text-align: center;">PAINEL DE ADM</h1>
    <button id="mostrar-usuarios">Mostrar Usuários (NÃO ADMS)</button>
    <button id="mostrar-pedidos">Mostrar Pedidos</button>
    <button id="cadastrar-jogo">Cadastrar Jogo</button>
    <div id="usuarios-container">
        <script>
            document.getElementById('mostrar-usuarios').addEventListener('click', function() {
                fetch('/painel-adm/mostrar-usuarios', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Erro ao buscar usuários');
                    }
                    return response.json();
                })
                .then(data => {
                    const container = document.getElementById('usuarios-container');
                    container.innerHTML = ''; // Limpa o conteúdo anterior

                    const table = document.createElement('table');
                    const thead = document.createElement('thead');
                    const tbody = document.createElement('tbody');

                    // Cria o cabeçalho da tabela
                    const headerRow = document.createElement('tr');
                    headerRow.innerHTML = '<th>ID</th><th>Email</th><th>Nome</th><th>Status</th>'; // Adicione mais colunas conforme necessário
                    thead.appendChild(headerRow);

                    // Adiciona os usuários à tabela
                    data.usuarios.forEach(usuario => {
                        const row = document.createElement('tr');
                        row.innerHTML = `<td>${usuario.id_usuario}</td><td>${usuario.email}</td><td>${usuario.nome}</td><td>${usuario.status}</td>`; // Adicione mais colunas conforme necessário
                        tbody.appendChild(row);
                    });

                    table.appendChild(thead);
                    table.appendChild(tbody);
                    container.appendChild(table);
                })
                .catch(error => {
                    console.error('Erro:', error);
                    alert('Erro ao buscar usuários');
                });
            });
        </script>
    </div>
    <div id="usuarios-container">
        <script>
            document.getElementById('mostrar-pedidos').addEventListener('click', function() {
                fetch('/painel-adm/mostrar-pedidos', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Erro ao buscar usuários');
                    }
                    return response.json();
                })
                .then(data => {
                    const container = document.getElementById('usuarios-container');
                    container.innerHTML = ''; // Limpa o conteúdo anterior
    
                    const table = document.createElement('table');
                    const thead = document.createElement('thead');
                    const tbody = document.createElement('tbody');
    
                    // Cria o cabeçalho da tabela
                    const headerRow = document.createElement('tr');
                    headerRow.innerHTML = '<th>ID Pedido</th><th>ID Usuário</th><th>ID Endereço</th><th>Data do Pedido</th><th>Status</th><th>Total</th>'; // Adicione mais colunas conforme necessário
                    thead.appendChild(headerRow);
    
                    // Adiciona os usuários à tabela
                    data.pedidos.forEach(pedido => {
                        const row = document.createElement('tr');
                        row.innerHTML = `<td>${pedido.id_pedido}</td><td>${pedido.id_usuario}</td><td>${pedido.id_endereco}</td><td>${pedido.data_pedido}</td><td>${pedido.status}</td><td>${pedido.total}</td>`; // Adicione mais colunas conforme necessário
                        tbody.appendChild(row);
                    });
    
                    table.appendChild(thead);
                    table.appendChild(tbody);
                    container.appendChild(table);
                })
                .catch(error => {
                    console.error('Erro:', error);
                    alert('Erro ao buscar usuários');
                });
            });
        </script>
    </div>
    <div id="usuarios-container">
        <form id="formJogo" action="/painel-adm/cadastrar-jogo" method="post" style="display: none" enctype="multipart/form-data">
            <div class="form-group">
                <label for="exampleFormControlInput1">Nome do Jogo</label>
                <input type="text" name="nomeJogo" class="form-control" id="exampleFormControlInput1" placeholder="Digite o nome do jogo..." required>
            </div>
            <div class="form-group">
                <label for="exampleFormControlInput1">Desenvolvedora do Jogo</label>
                <input type="text" name="desenvolvedora" class="form-control" id="exampleFormControlInput1" placeholder="Digite a desenvolvedora do jogo..." required>
            </div>
            <div class="form-group">
                <label for="exampleFormControlInput1">Editora</label>
                <input type="text" name="editora" class="form-control" id="exampleFormControlInput1" placeholder="Digite a editora do jogo..." required>
            </div>
            <div class="form-group">
                <label for="exampleFormControlInput1">Data de Lançamento</label>
                <input type="date" name="dataLancamento" class="form-control" id="exampleFormControlInput1" placeholder="Digite a data de lançamento do jogo..." required>
            </div>
            <div class="form-group">
                <label for="exampleFormControlInput1">Preço do Jogo</label>
                <input type="number" name="preco" class="form-control" id="exampleFormControlInput1" placeholder="Digite o preço do jogo..." required>
            </div>
            <div class="form-group">
                <label for="exampleFormControlInput1">Categorias</label>
                <input type="text" name="categorias" class="form-control" id="exampleFormControlInput1" placeholder="Digite as categorias do jogo..." required>
            </div>
            <div class="form-group">
                <label for="exampleFormControlInput1">Plataformas</label>
                <input type="text" name="plataformas" class="form-control" id="exampleFormControlInput1" placeholder="Digite as plataformas do jogo..." required>
            </div>
            <div class="form-group">
                <label for="exampleFormControlInput1">Modo de Jogo</label>
                <input type="text" name="modoDeJogo" class="form-control" id="exampleFormControlInput1" placeholder="Digite o modo de jogo..." required>
            </div>
            <div class="form-group">
                <label for="exampleFormControlInput1">Digite o(s) idioma(s) do jogo</label>
                <input type="text" name="idiomas" class="form-control" id="exampleFormControlInput1" placeholder="Digite o(s) idioma(s) do jogo..." required>
            </div>
            <div class="form-group">
                <label for="exampleFormControlTextarea1">Descrição do Jogo</label>
                <textarea class="form-control" name="descricao" id="exampleFormControlTextarea1" rows="3" required></textarea>
            </div>
            <div class="form-group">
                <label for="exampleFormControlTextarea1">Sobre</label>
                <textarea class="form-control" name="sobre" id="exampleFormControlTextarea1" rows="3" required></textarea>
            </div>
            <div class="form-group">
                <label for="exampleFormControlTextarea1">Requisitos do Sistema</label>
                <textarea class="form-control" name="requisitos" id="exampleFormControlTextarea1" rows="3" required></textarea>
            </div>
            <div class="form-group">
                <label for="imagemJogo">Imagem do jogo:</label>
                <input class="mb-3 form-control" accept="image/*" type="file" name="imagemJogo" id="imagemJogo">
            </div>
            <button type="submit" class="btn btn-primary">Cadastrar</button>
        </form>
        <script>
            document.getElementById('cadastrar-jogo').addEventListener('click', function() {
                let form = document.getElementById('formJogo');
                if (form.style.display === 'none') {
                    form.style.display = 'block';  
                } else {
                    form.style.display = 'none';
                }
            });
        </script>
    </div>
</body>
<%- include('includes/footer.ejs') -%>